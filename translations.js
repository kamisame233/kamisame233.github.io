// Translation table for Hainan Jiangshuo Industrial Co., Ltd. website
// English to Chinese translations

const translations = {
  'en': {
    // Navigation
    'Services': 'Services',
    'About': 'About', 
    'Contact': 'Contact',
    'Cart': 'Cart',
    'Book now': 'Book now',
    
    // Company name
    'Hainan Jiangshuo Industrial Co., Ltd.': 'Hainan Jiangshuo Industrial Co., Ltd.',
    
    // Language picker
    'English': 'English',
    'Chinese': 'Chinese',
    
    // Menu items
    'Open Menu': 'Open Menu',
    'Close Menu': 'Close Menu',
    'Back': 'Back',
    'Skip to Content': 'Skip to Content',
    
    // Homepage content
    'Sign up with your email address to receive news and updates.': 'Sign up with your email address to receive news and updates.',
    'Email Address': 'Email Address',
    'Sign Up': 'Sign Up',
    'Thank you!': 'Thank you!',
    
    // Hero section
    'Where global quality meets local expertise.': 'Where global quality meets local expertise.',
    'Our team handles import, logistics, and in-store retailing. From customs clearance to retail shelves, we provide full-service solutions to help global brands succeed in Hainan\'s Free Trade Port.': 'Our team handles import, logistics, and in-store retailing. From customs clearance to retail shelves, we provide full-service solutions to help global brands succeed in Hainan\'s Free Trade Port.',
    'Learn more': 'Learn more',
    
    // About page content
    'About &mdash; Hainan Jiangshuo Industrial Co., Ltd.': 'About &mdash; Hainan Jiangshuo Industrial Co., Ltd.',
    'Hainan Jiangshuo Industrial Co., Ltd. is a trade and distribution company based in the Hainan Free Trade Port, China. We help international brands enter the Chinese market by managing import logistics, customs clearance, and in-store retail operations.': 'Hainan Jiangshuo Industrial Co., Ltd. is a trade and distribution company based in the Hainan Free Trade Port, China. We help international brands enter the Chinese market by managing import logistics, customs clearance, and in-store retail operations.',
    'With direct access to China\'s most open policy zone, we specialize in making global products locally available—efficiently, compliantly, and with care. From premium consumer goods to niche outdoor brands, we work closely with partners to deliver long-term value through tailored go-to-market strategies.': 'With direct access to China\'s most open policy zone, we specialize in making global products locally available—efficiently, compliantly, and with care. From premium consumer goods to niche outdoor brands, we work closely with partners to deliver long-term value through tailored go-to-market strategies.',
    'Whether you\'re exploring market entry or looking for a reliable local distributor, our team is here to bridge the gap between global quality and Chinese opportunity.': 'Whether you\'re exploring market entry or looking for a reliable local distributor, our team is here to bridge the gap between global quality and Chinese opportunity.',
    
    // Services page content
    'Services &mdash; Hainan Jiangshuo Industrial Co., Ltd.': 'Services &mdash; Hainan Jiangshuo Industrial Co., Ltd.',
    'Services we offer': 'Services we offer',
    
    // Contact page content
    'Contact us': 'Contact us',
    'Interested in working together? Fill out some info and we will be in touch shortly. We can\'t wait to hear from you!': 'Interested in working together? Fill out some info and we will be in touch shortly. We can\'t wait to hear from you!',
    
    // Form elements
    'Submit': 'Submit',
    'First Name': 'First Name',
    'Last Name': 'Last Name',
    'Email': 'Email',
    'Phone': 'Phone',
    'Message': 'Message',
    'Address Line 1': 'Address Line 1',
    'Address Line 2': 'Address Line 2',
    'City / Town': 'City / Town',
    'Postcode': 'Postcode',
    'Country': 'Country',
    'State/Province': 'State/Province',
    'Zip/Postal Code': 'Zip/Postal Code',
    
    // Validation messages
    'A valid selection must be made.': 'A valid selection must be made.',
    'Must be a valid URL.': 'Must be a valid URL.',
    'Value should have a length no longer than {0}.': 'Value should have a length no longer than {0}.',
    'Email addresses should follow the format user@domain.com.': 'Email addresses should follow the format user@domain.com.',
    '{0} is required.': '{0} is required.',
    'Please fill out at least one form field.': 'Please fill out at least one form field.',
    'Captcha validation failed. Please try again.': 'Captcha validation failed. Please try again.',
    'Unable to submit form. Please try again later.': 'Unable to submit form. Please try again later.',
    'Invalid form data.': 'Invalid form data.',
    'Form submission failed. Review the following information: {0}.': 'Form submission failed. Review the following information: {0}.'
  },
  
  'zh': {
    // Navigation
    'Services': '服务',
    'About': '关于我们',
    'Contact': '联系我们',
    'Cart': '购物车',
    'Book now': '立即预订',
    
    // Company name
    'Hainan Jiangshuo Industrial Co., Ltd.': '海南江硕实业有限公司',
    
    // Language picker
    'English': 'English',
    'Chinese': '中文',
    
    // Menu items
    'Open Menu': '打开菜单',
    'Close Menu': '关闭菜单',
    'Back': '返回',
    'Skip to Content': '跳转到内容',
    
    // Homepage content
    'Sign up with your email address to receive news and updates.': '注册您的电子邮件地址以接收新闻和更新。',
    'Email Address': '电子邮件地址',
    'Sign Up': '注册',
    'Thank you!': '谢谢！',
    
    // Hero section
    'Where global quality meets local expertise.': '全球品质与本地专业知识的完美结合。',
    'Our team handles import, logistics, and in-store retailing. From customs clearance to retail shelves, we provide full-service solutions to help global brands succeed in Hainan\'s Free Trade Port.': '我们的团队处理进口、物流和店内零售业务。从清关到零售货架，我们提供全方位服务解决方案，帮助全球品牌在海南自由贸易港取得成功。',
    'Learn more': '了解更多',
    
    // About page content
    'About &mdash; Hainan Jiangshuo Industrial Co., Ltd.': '关于我们 — 海南江硕实业有限公司',
    'Hainan Jiangshuo Industrial Co., Ltd. is a trade and distribution company based in the Hainan Free Trade Port, China. We help international brands enter the Chinese market by managing import logistics, customs clearance, and in-store retail operations.': '海南江硕实业有限公司是一家位于中国海南自由贸易港的贸易和分销公司。我们通过管理进口物流、清关和店内零售业务，帮助国际品牌进入中国市场。',
    'With direct access to China\'s most open policy zone, we specialize in making global products locally available—efficiently, compliantly, and with care. From premium consumer goods to niche outdoor brands, we work closely with partners to deliver long-term value through tailored go-to-market strategies.': '凭借对中国最开放政策区域的直接访问，我们专注于高效、合规、谨慎地让全球产品在当地可用。从高端消费品到小众户外品牌，我们与合作伙伴密切合作，通过量身定制的市场进入策略提供长期价值。',
    'Whether you\'re exploring market entry or looking for a reliable local distributor, our team is here to bridge the gap between global quality and Chinese opportunity.': '无论您是在探索市场进入还是寻找可靠的本地分销商，我们的团队都在这里架起全球品质与中国机遇之间的桥梁。',
    
    // Services page content
    'Services &mdash; Hainan Jiangshuo Industrial Co., Ltd.': '服务 — 海南江硕实业有限公司',
    'Services we offer': '我们提供的服务',
    'We offer end-to-end solutions for international brands looking to enter the Chinese market via Hainan Free Trade Port.': '我们为希望通过海南自由贸易港进入中国市场的国际品牌提供端到端解决方案。',
    'We assist with smooth and compliant import procedures, including bonded warehouse options and zero-tariff entry under Hainan Free Trade Port policies.': '我们协助顺利合规的进口程序，包括保税仓库选项和海南自由贸易港政策下的零关税入境。',
    'At Hainan Jiangshuo Industrial Co., Ltd., we believe in bridging global quality with local opportunity. As a company rooted in the fast-growing Hainan Free Trade Port, we are committed to creating long-term, trustworthy partnerships between international brands and Chinese consumers.': '在海南江硕实业有限公司，我们相信架起全球品质与本地机遇的桥梁。作为一家扎根于快速发展的海南自由贸易港的公司，我们致力于在国际品牌和中国消费者之间建立长期、可信的合作伙伴关系。',
    
    // Service titles
    'Direct Import & Customs Clearance': '直接进口与清关',
    'Retail Distribution & Merchandising': '零售分销与商品销售',
    'Logistics Coordination': '物流协调',
    'Localized Sales Strategy': '本地化销售策略',
    'Brand Representation': '品牌代理',
    
    // Service descriptions
    'Your products will be displayed and sold at our physical retail space in Haikou, supported by in-store branding, customer service, and local promotions.': '您的产品将在我们位于海口的实体零售空间展示和销售，并得到店内品牌推广、客户服务和本地促销活动的支持。',
    'We coordinate shipping, customs, warehousing, and last-mile delivery to ensure seamless supply chain operations.': '我们协调运输、清关、仓储和最后一公里配送，确保供应链运营的无缝衔接。',
    'We tailor product positioning, pricing, and marketing to suit the preferences of Hainan consumers and the domestic outdoor/lifestyle goods market.': '我们根据海南消费者和国内户外/生活方式用品市场的偏好，量身定制产品定位、定价和营销策略。',
    'We act as your trusted local representative, ensuring your brand image and standards are maintained in all sales channels.': '我们作为您值得信赖的本地代表，确保您的品牌形象和标准在所有销售渠道中得到维护。',
    
    // About page content
    'Who we are': '我们是谁',
    'With direct access to China\'s most open policy zone, we specialize in making global products locally available—efficiently, compliantly, and with care. From premium consumer goods to niche outdoor brands, we work closely with partners to deliver long-term value through tailored go-to-market strategies.': '凭借直接进入中国最开放政策区域的优势，我们专注于让全球产品在当地高效、合规、贴心地提供。从优质消费品到小众户外品牌，我们与合作伙伴密切合作，通过量身定制的市场进入策略提供长期价值。',
    
    // Company ethos section
    'Our company ethos': '我们的公司理念',
    
    // Contact page content
    'Contact us': '联系我们',
    'Interested in working together? Fill out some info and we will be in touch shortly. We can\'t wait to hear from you!': '有兴趣合作吗？填写一些信息，我们会很快与您联系。我们迫不及待地想听到您的消息！',
    'Visiting Address': '访问地址',
    'Hours': '营业时间',
    'Haikou International Duty-Free City\nHainan, China 570312': '海口国际免税城\n中国海南 570312',
    'Monday–Friday\n10am–6pm': '周一至周五\n上午10点至下午6点',
    
    // Navigation links
    'About': '关于我们',
    'Contact': '联系我们',
    
    // Form elements
    'Submit': '提交',
    'First Name': '名字',
    'Last Name': '姓氏',
    'Email': '电子邮件',
    'Phone': '电话',
    'Message': '消息',
    'Address Line 1': '地址行1',
    'Address Line 2': '地址行2',
    'City / Town': '城市/城镇',
    'Postcode': '邮政编码',
    'Country': '国家',
    'State/Province': '州/省',
    'Zip/Postal Code': '邮政编码',
    
    // Validation messages
    'A valid selection must be made.': '必须做出有效选择。',
    'Must be a valid URL.': '必须是有效的URL。',
    'Value should have a length no longer than {0}.': '值的长度不应超过{0}。',
    'Email addresses should follow the format user@domain.com.': '电子邮件地址应遵循user@domain.com格式。',
    '{0} is required.': '{0}是必需的。',
    'Please fill out at least one form field.': '请至少填写一个表单字段。',
    'Captcha validation failed. Please try again.': '验证码验证失败。请重试。',
    'Unable to submit form. Please try again later.': '无法提交表单。请稍后重试。',
    'Invalid form data.': '无效的表单数据。',
    'Form submission failed. Review the following information: {0}.': '表单提交失败。请查看以下信息：{0}。'
  }
};

// Language management system
class LanguageManager {
  constructor() {
    this.currentLanguage = this.getStoredLanguage() || 'en';
    this.init();
  }
  
  init() {
    this.setupLanguagePicker();
    this.translatePage();
    this.updateLanguagePicker();
  }
  
  getStoredLanguage() {
    return localStorage.getItem('website-language') || 'en';
  }
  
  setStoredLanguage(lang) {
    localStorage.setItem('website-language', lang);
  }
  
  setupLanguagePicker() {
    // Setup desktop language picker
    const desktopPicker = document.getElementById('multilingual-language-picker-desktop');
    if (desktopPicker) {
      desktopPicker.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        this.toggleLanguagePicker();
      });
    }
    
    // Setup mobile language picker
    const mobilePicker = document.getElementById('multilingual-language-picker-mobile');
    if (mobilePicker) {
      const mobileLink = document.querySelector('[data-folder-id="language-picker"]');
      if (mobileLink) {
        mobileLink.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          this.toggleLanguagePicker();
        });
      }
    }
    
    // Create language options
    this.createLanguageOptions();
    
    // Close language picker when clicking outside
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.language-picker')) {
        this.hideLanguagePicker();
      }
    });
  }
  
  createLanguageOptions() {
    const languages = [
      { code: 'en', name: 'English', flag: '🇬🇧' },
      { code: 'zh', name: '中文', flag: '🇨🇳' }
    ];
    
    // Desktop picker content
    const desktopContent = document.querySelector('#language-picker-menu');
    if (desktopContent) {
      desktopContent.innerHTML = languages.map(lang => 
        `<div class="language-option" data-lang="${lang.code}">
          <span class="flag">${lang.flag}</span>
          <span class="name">${lang.name}</span>
        </div>`
      ).join('');
      
      // Add click handlers
      desktopContent.querySelectorAll('.language-option').forEach(option => {
        option.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          const lang = option.dataset.lang;
          this.switchLanguage(lang);
          this.hideLanguagePicker();
        });
      });
    }
    
    // Mobile picker content
    const mobileContent = document.querySelector('#multilingual-language-picker-mobile .language-picker-content');
    if (mobileContent) {
      mobileContent.innerHTML = languages.map(lang => 
        `<div class="header-menu-nav-item">
          <a href="#" class="language-option" data-lang="${lang.code}">
            <div class="header-menu-nav-item-content">
              <span class="flag">${lang.flag}</span>
              <span class="name">${lang.name}</span>
            </div>
          </a>
        </div>`
      ).join('');
      
      // Add click handlers
      mobileContent.querySelectorAll('.language-option').forEach(option => {
        option.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          const lang = option.dataset.lang;
          this.switchLanguage(lang);
          this.hideLanguagePicker();
        });
      });
    }
  }
  
  toggleLanguagePicker() {
    const desktopContent = document.querySelector('#language-picker-menu');
    const mobileContent = document.querySelector('#multilingual-language-picker-mobile');
    
    if (desktopContent) {
      desktopContent.style.display = desktopContent.style.display === 'block' ? 'none' : 'block';
    }
    
    if (mobileContent) {
      mobileContent.style.display = mobileContent.style.display === 'block' ? 'none' : 'block';
    }
  }
  
  hideLanguagePicker() {
    const desktopContent = document.querySelector('#language-picker-menu');
    const mobileContent = document.querySelector('#multilingual-language-picker-mobile');
    
    if (desktopContent) {
      desktopContent.style.display = 'none';
    }
    
    if (mobileContent) {
      mobileContent.style.display = 'none';
    }
  }
  
  switchLanguage(lang) {
    if (lang === this.currentLanguage) return;
    
    console.log('Switching language from', this.currentLanguage, 'to', lang);
    
    this.currentLanguage = lang;
    this.setStoredLanguage(lang);
    
    // Update HTML lang attribute
    document.documentElement.lang = lang === 'zh' ? 'zh-CN' : 'en-US';
    
    // Update meta tags
    this.updateMetaTags(lang);
    
    // Translate page content
    this.translatePage();
    
    // Update language picker display
    this.updateLanguagePicker();
    
    // Force re-render of language picker content
    this.createLanguageOptions();
  }
  
  updateMetaTags(lang) {
    const title = document.querySelector('title');
    if (title) {
      const currentTitle = title.textContent;
      const translatedTitle = this.translateText(currentTitle);
      if (translatedTitle !== currentTitle) {
        title.textContent = translatedTitle;
      }
    }
    
    // Update Open Graph tags
    const ogTitle = document.querySelector('meta[property="og:title"]');
    if (ogTitle) {
      const currentOgTitle = ogTitle.getAttribute('content');
      const translatedOgTitle = this.translateText(currentOgTitle);
      if (translatedOgTitle !== currentOgTitle) {
        ogTitle.setAttribute('content', translatedOgTitle);
      }
    }
  }
  
  translatePage() {
    // Translate all text content
    this.translateElements();
    
    // Translate form placeholders and labels
    this.translateForms();
    
    // Translate navigation
    this.translateNavigation();
    
    // Apply Chinese button styling
    this.applyChineseButtonStyling();
  }
  
  applyChineseButtonStyling() {
    // Apply different styling based on language
    const allButtons = document.querySelectorAll('.sqs-block-button-element--primary');
    allButtons.forEach(button => {
      this.setupButtonBaseStyles(button);
      
      if (this.currentLanguage === 'zh-CN') {
        this.applyChineseButtonColors(button);
      } else {
        this.applyEnglishButtonColors(button);
      }
    });
  }

  // Consolidated base button styles
  setupButtonBaseStyles(button) {
    button.style.backgroundColor = 'transparent !important';
    button.style.textDecoration = 'none !important';
    button.style.textDecorationLine = 'none !important';
    button.style.textDecorationStyle = 'none !important';
    button.style.textDecorationColor = 'transparent !important';
  }

  // Chinese button colors
  applyChineseButtonColors(button) {
    button.style.color = 'black !important';
    button.style.border = '1px solid black !important';
    
    button.addEventListener('mouseenter', function() {
      this.style.color = '#333 !important';
      this.style.backgroundColor = 'rgba(0, 0, 0, 0.1) !important';
      this.style.borderColor = '#333 !important';
    });
    
    button.addEventListener('mouseleave', function() {
      this.style.color = 'black !important';
      this.style.backgroundColor = 'transparent !important';
      this.style.borderColor = 'black !important';
    });
  }

  // English button colors
  applyEnglishButtonColors(button) {
    button.style.color = 'white !important';
    button.style.border = '1px solid white !important';
    
    button.addEventListener('mouseenter', function() {
      this.style.color = '#ccc !important';
      this.style.backgroundColor = 'rgba(255, 255, 255, 0.1) !important';
      this.style.borderColor = '#ccc !important';
    });
    
    button.addEventListener('mouseleave', function() {
      this.style.color = 'white !important';
      this.style.backgroundColor = 'transparent !important';
      this.style.borderColor = 'white !important';
    });
  }
  
  translateElements() {
    // Translate elements with data-translate="true" (flag-based translation)
    const elementsToTranslate = document.querySelectorAll('[data-translate="true"]');
    elementsToTranslate.forEach(element => {
      const originalText = element.textContent.trim();
      const translatedText = this.translateText(originalText);
      if (translatedText !== originalText) {
        // For links, preserve the href attribute and other attributes
        if (element.tagName === 'A') {
          const href = element.getAttribute('href');
          const target = element.getAttribute('target');
          const style = element.getAttribute('style');
          const onmouseover = element.getAttribute('onmouseover');
          const onmouseout = element.getAttribute('onmouseout');
          
          // Create new link with translated text but preserve all attributes
          element.textContent = translatedText;
          if (href) element.setAttribute('href', href);
          if (target) element.setAttribute('target', target);
          if (style) element.setAttribute('style', style);
          if (onmouseover) element.setAttribute('onmouseover', onmouseover);
          if (onmouseout) element.setAttribute('onmouseout', onmouseout);
          
          // Ensure the link remains clickable by re-adding event listeners if needed
          if (href && (href.includes('about.html') || href.includes('contact.html'))) {
            element.style.cursor = 'pointer';
            element.style.color = 'white';
            element.style.textDecoration = 'underline';
          }
        } else {
          element.textContent = translatedText;
        }
      }
    });
    
    // Translate elements with data-translate containing text (value-based translation)
    const elementsWithText = document.querySelectorAll('[data-translate]:not([data-translate="true"])');
    elementsWithText.forEach(element => {
      const originalText = element.getAttribute('data-translate');
      const translatedText = this.translateText(originalText);
      element.textContent = translatedText;
    });
    
    // Translate common text patterns (fallback for elements without data-translate)
    const textElements = document.querySelectorAll('h1, h2, h3, h4, h5, h6, p, span, a, button, label');
    textElements.forEach(element => {
      // Skip if already has data-translate attribute
      if (element.hasAttribute('data-translate')) return;
      
      if (element.textContent.trim()) {
        const translatedText = this.translateText(element.textContent);
        if (translatedText !== element.textContent) {
          element.textContent = translatedText;
        }
      }
    });
  }
  
  translateForms() {
    // Translate form labels
    const labels = document.querySelectorAll('label');
    labels.forEach(label => {
      const translatedText = this.translateText(label.textContent);
      if (translatedText !== label.textContent) {
        label.textContent = translatedText;
      }
    });
    
    // Translate form placeholders
    const inputs = document.querySelectorAll('input[placeholder], textarea[placeholder]');
    inputs.forEach(input => {
      const translatedPlaceholder = this.translateText(input.placeholder);
      if (translatedPlaceholder !== input.placeholder) {
        input.placeholder = translatedPlaceholder;
      }
    });
    
    // Translate form buttons
    const buttons = document.querySelectorAll('button[value], input[type="submit"]');
    buttons.forEach(button => {
      const translatedValue = this.translateText(button.value);
      if (translatedValue !== button.value) {
        button.value = translatedValue;
      }
    });
  }
  
  translateNavigation() {
    // Translate navigation links
    const navLinks = document.querySelectorAll('.header-nav a, .header-menu-nav-item a');
    navLinks.forEach(link => {
      const translatedText = this.translateText(link.textContent);
      if (translatedText !== link.textContent) {
        link.textContent = translatedText;
      }
    });
    
    // Also handle bottom navigation links (About and Contact)
    const bottomNavLinks = document.querySelectorAll('a[href*="about.html"], a[href*="contact.html"]');
    bottomNavLinks.forEach(link => {
      const originalText = link.textContent.trim();
      const translatedText = this.translateText(originalText);
      if (translatedText !== originalText) {
        link.textContent = translatedText;
      }
      
      // Ensure navigation links are always functional
      this.ensureNavigationLinkFunctionality(link);
    });
  }
  
  ensureNavigationLinkFunctionality(link) {
    // Only apply styling to BOTTOM navigation links (in sqs-html-content)
    if (link.href && (link.href.includes('about.html') || link.href.includes('contact.html'))) {
      const isBottomNav = link.closest('.sqs-html-content');
      
      if (isBottomNav) {
        this.applyBottomNavStyling(link);
        this.setupNavigationAttributes(link);
        this.addNavigationHoverEffects(link);
      }
    }
  }

  // Consolidated styling function
  applyBottomNavStyling(link) {
    link.style.cursor = 'pointer';
    link.style.color = 'white';
    link.style.textDecoration = 'underline';
    link.style.transition = 'color 0.3s ease';
  }

  // Consolidated attribute setup
  setupNavigationAttributes(link) {
    if (!link.getAttribute('href')) {
      if (link.textContent.toLowerCase().includes('about')) {
        link.setAttribute('href', 'about.html');
      } else if (link.textContent.toLowerCase().includes('contact')) {
        link.setAttribute('href', 'contact.html');
      }
    }
    
    if (!link.getAttribute('target')) {
      link.setAttribute('target', '_blank');
    }
  }

  // Consolidated hover effects
  addNavigationHoverEffects(link) {
    link.addEventListener('mouseenter', function() {
      this.style.color = '#ccc';
    });
    
    link.addEventListener('mouseleave', function() {
      this.style.color = 'white';
    });
  }
  
  translateText(text) {
    if (!text || !translations[this.currentLanguage]) {
      return text;
    }
    
    const trimmedText = text.trim();
    
    // Direct match
    if (translations[this.currentLanguage][trimmedText]) {
      return translations[this.currentLanguage][trimmedText];
    }
    
    // Try to find partial matches for longer text
    for (const [key, value] of Object.entries(translations[this.currentLanguage])) {
      if (trimmedText.includes(key)) {
        return trimmedText.replace(key, value);
      }
    }
    
    // If no translation found, try reverse lookup for Chinese to English
    if (this.currentLanguage === 'en') {
      for (const [key, value] of Object.entries(translations['zh'])) {
        if (trimmedText === value) {
          return key;
        }
      }
    }
    
    return text;
  }
  
  updateLanguagePicker() {
    const currentLanguageName = this.currentLanguage === 'zh' ? '中文' : 'English';
    const currentLanguageElements = document.querySelectorAll('.current-language-name');
    
    currentLanguageElements.forEach(element => {
      element.textContent = currentLanguageName;
    });
  }
}

// Initialize language manager when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  window.languageManager = new LanguageManager();
  
  // Ensure navigation links work immediately
  ensureNavigationLinksWork();
});

// Function to ensure navigation links work immediately
function ensureNavigationLinksWork() {
  // Only target BOTTOM navigation links (in sqs-html-content)
  const navLinks = document.querySelectorAll('.sqs-html-content a[href*="about.html"], .sqs-html-content a[href*="contact.html"]');
  navLinks.forEach(link => {
        // Force styling and functionality for bottom navigation only
        link.style.cursor = 'pointer';
        link.style.color = 'white';
        link.style.textDecoration = 'underline';
        link.style.transition = 'color 0.3s ease';
    
    // Ensure attributes are set
    if (!link.getAttribute('target')) {
      link.setAttribute('target', '_blank');
    }
    
    // Add hover effects
    link.addEventListener('mouseenter', function() {
      this.style.color = '#ccc';
    });
    
    link.addEventListener('mouseleave', function() {
      this.style.color = 'white';
    });
    
    // Ensure click functionality
    link.addEventListener('click', function(e) {
      // Allow default behavior (navigation)
      console.log('Bottom navigation link clicked:', this.href);
    });
  });
}

// Also initialize if DOM is already loaded
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => {
    if (!window.languageManager) {
      window.languageManager = new LanguageManager();
    }
  });
} else {
  if (!window.languageManager) {
    window.languageManager = new LanguageManager();
  }
}

// Export for use in other scripts
if (typeof module !== 'undefined' && module.exports) {
  module.exports = { translations, LanguageManager };
}
